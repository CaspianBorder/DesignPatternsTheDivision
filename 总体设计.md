# 总体设计

整个游戏划分为几个方面：

1. 玩家操控角色

   1. 玩家武器
   2. 玩家技能
   3. 玩家道具
   4. 玩家等级

2. 非玩家操控角色(NPC)

   1. 角色种类
   2. 角色熟练度
   3. 角色阵营(待定)

3. 场景

   1. 场景划分
   2. 场景元素

4. 战斗

   1. 玩家角色行为
   2. 非玩家角色行为
   3. 伤害的计算与判定

5. 界面

6. 多人机制(待定)

   ---

## 玩家操控角色

### 玩家武器

#### 武器

玩家武器将由若干枪械组成，武器的类型以及配件将会对玩家对NPC产生不同的伤害效果(武器可能无法全部实现，具体实现程度以工期为准)

武器类型及其对应的特殊效果为：

| 枪械类型 | 伤害     | 射速     | 距离 | 特殊效果                     |
| -------- | -------- | -------- | ---- | ---------------------------- |
| 突击步枪 | 中等偏高 | 中等偏高 | 中等 | 无                           |
| 霰弹枪   | 高       | 低       | 近   | 命中时降低敌人的命中率       |
| 狙击步枪 | 高       | 低       | 远   | 击中头部有伤害加成           |
| 轻机枪   | 中等     | 中等     | 中等 | 对不在掩体内的敌人有伤害加成 |
| 冲锋枪   | 低       | 高       | 近   | 增加暴击概率                 |
| 手枪     | 低       | 中等     | 近   | 无弹药限制                   |

每一武器类型下都有2~3种不同的具体类型，伤害平均值/射速略有偏差，但总体单位时间伤害量(DPS)相近

生成的同种武器将在伤害量上有所区别，但每一种武器均有伤害量的上下阈值

武器采用**抽象工厂模式**进行生成

#### 武器配件

玩家武器将可以装配若干配件，但配件分为以下几大类：

1. 瞄准具
2. 枪口
3. 下枪管
4. 弹匣

每一部分只能允许采用一种相应类型的配件。武器与配件将采用**生成器模式**进行组合，生成的武器实例将会根据所选择配件的不同而有细微差别。

### 玩家技能

玩家技能将分为两个部分，主动技能以及被动技能。技能可以由升级的点数进行解锁

#### 主动技能



---

## 非玩家控制角色(NPC)



---

## 场景



---

## 战斗

### 伤害的计算与判定

伤害的计算与判定将由***场景***对象进行，玩家与NPC对象仅在被调用时提供单次伤害，不直接参与到计算当中

玩家与NPC对象将通过**观察者模式**获取伤害及剩余血量信息

#### 枪械伤害计算-玩家

玩家对NPC的枪械伤害将由**装饰者模式**进行计算

具体计算公式为：

​	`单次伤害 = 武器基础伤害 * ( 暴击判定 * 暴击伤害 ) * 爆头伤害 * 加成伤害 * 伤害减免指数 * 等级差距指数`

击中判定将在每次一单次伤害造成前进行运算，最终伤害=所有有效击中的单次伤害之和

#### 伤害计算-NPC

NPC对玩家的伤害将由**策略模式**进行计算

由于NPC不存在武器与配件的多样化，只有种类与熟练度的区别，因此NPC造成的单次伤害相对固定，可以划归策略模式处理

#### 伤害判定

玩家对NPC与NPC对玩家将采用同一套公式进行伤害判定，即为：

`命中概率 = 伤害发出方射击方式 * 伤害接收方隐蔽状态`

是否命中将会根据命中概率，采用随机数的方法，进行判断